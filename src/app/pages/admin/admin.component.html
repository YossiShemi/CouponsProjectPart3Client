<div class="title"> Admin Management System </div>


<mat-tab-group mat-align-tabs="center" class="admin" *ngIf="!showSpinner">

  <mat-tab label="Companies">
    <!-- Filter -->
    <div class="filterAdd">
      <div class="filter">
        <mat-form-field>
          <mat-label class="filterText"> Filter For Easy Search</mat-label>
          <input matInput (keyup)="applyFilterCompanies($event)" placeholder="Ex. Yossi Shemi" #input>
        </mat-form-field>
      </div>
      <button mat-mini-fab class="plus" title="Add Company" class="plus" (click)="addCompany()">
        +
      </button>
    </div>
    <table mat-table [dataSource]="companySource" class="mat-elevation-z8">
      <!-- Headers -->
      <tr mat-header-row *matHeaderRowDef="companyColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: companyColumns;"></tr>
      <!-- ID Column -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> ID </th>
        <td mat-cell *matCellDef="let element"> {{element.id}} </td>
      </ng-container>
      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
      </ng-container>
      <!-- Email Column -->
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef> Email </th>
        <td mat-cell *matCellDef="let element"> {{element.email}} </td>
      </ng-container>
      <!-- Password Column -->
      <ng-container matColumnDef="password">
        <th mat-header-cell *matHeaderCellDef> Password </th>
        <td mat-cell *matCellDef="let element"> {{element.password}} </td>
      </ng-container>
      <!-- Options Column -->
      <ng-container matColumnDef="options">
        <th mat-header-cell *matHeaderCellDef> Options </th>
        <td mat-cell *matCellDef="let element">
          <button mat-button color="primary" (click)="updateCompany(element)">Update</button> -
          <button mat-button color="warn" (click)="deleteCompany(element)">Delete</button>
        </td>
      </ng-container>
      <!-- Row shown when there is no matching data. -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
      </tr>
    </table>
  </mat-tab>


  <mat-tab label="Customers">
    <!-- Filter -->
    <div class="filterAdd">
      <div class="filter">
        <mat-form-field>
          <mat-label class="filterText"> Filter For Easy Search</mat-label>
          <input matInput (keyup)="applyFilterCustomers($event)" placeholder="Ex. Yossi Shemi" #input2>
        </mat-form-field>
      </div>
      <button mat-mini-fab class="plus" title="Add Customer" class="plus" (click)="addCustomer()">
        +
      </button>
    </div>
    <table mat-table [dataSource]="customerSource" class="mat-elevation-z8">
      <!-- Headers -->
      <tr mat-header-row *matHeaderRowDef="customerColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: customerColumns;"></tr>
      <!-- ID Column -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> ID </th>
        <td mat-cell *matCellDef="let element"> {{element.id}} </td>
      </ng-container>
      <!-- First Name Column -->
      <ng-container matColumnDef="firstName">
        <th mat-header-cell *matHeaderCellDef> First Name </th>
        <td mat-cell *matCellDef="let element"> {{element.firstName}} </td>
      </ng-container>
      <!-- Last Name Column -->
      <ng-container matColumnDef="lastName">
        <th mat-header-cell *matHeaderCellDef> Last Name </th>
        <td mat-cell *matCellDef="let element"> {{element.lastName}} </td>
      </ng-container>
      <!-- Email Column -->
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef> Email </th>
        <td mat-cell *matCellDef="let element"> {{element.email}} </td>
      </ng-container>
      <!-- Password Column -->
      <ng-container matColumnDef="password">
        <th mat-header-cell *matHeaderCellDef> Password </th>
        <td mat-cell *matCellDef="let element"> {{element.password}} </td>
      </ng-container>
      <!-- Options Column -->
      <ng-container matColumnDef="options">
        <th mat-header-cell *matHeaderCellDef> Options </th>
        <td mat-cell *matCellDef="let element">
          <button mat-button color="primary" (click)="updateCustomer(element)">Update</button> -
          <button mat-button color="warn" (click)="deleteCustomer(element)">Delete</button>
        </td>
      </ng-container>
      <!-- Row shown when there is no matching data. -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">No data matching the filter "{{input2.value}}"</td>
      </tr>
    </table>
  </mat-tab>

  <mat-tab label="Coupons">
    <!-- Filter -->
    <div class="filterAdd">
      <div class="filter">
        <mat-form-field>
          <mat-label class="filterText"> Filter For Easy Search</mat-label>
          <input matInput (keyup)="applyFilterCoupons($event)" placeholder="Ex. Yossi Shemi" #input3>
        </mat-form-field>
      </div>
    </div>
    <ng-container *ngIf="couponsSource!=null  && couponsSource.data.length>0; else elseTemplate">
      <table mat-table [dataSource]="couponsSource" class="mat-elevation-z8">
        <!-- Headers -->
        <tr mat-header-row *matHeaderRowDef="couponsColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: couponsColumns;"></tr>
        <!-- ID Column -->
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef> ID </th>
          <td mat-cell *matCellDef="let element"> {{element.id}} </td>
        </ng-container>
        <!-- Title Column -->
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef> Title </th>
          <td mat-cell *matCellDef="let element"> {{element.title}} </td>
        </ng-container>
        <!-- Start Column -->
        <ng-container matColumnDef="startDate">
          <th mat-header-cell *matHeaderCellDef> Start Date </th>
          <td mat-cell *matCellDef="let element"> {{element.startDate | date:'dd/MM/yyyy'}} </td>
        </ng-container>
        <!-- End Column -->
        <ng-container matColumnDef="endDate">
          <th mat-header-cell *matHeaderCellDef> End Date </th>
          <td mat-cell *matCellDef="let element"> {{element.endDate | date:'dd/MM/yyyy'}} </td>
        </ng-container>
        <!-- Amount Column -->
        <ng-container matColumnDef="amount">
          <th mat-header-cell *matHeaderCellDef> Amount </th>
          <td mat-cell *matCellDef="let element"> {{element.amount}} </td>
        </ng-container>
        <!-- Category Column -->
        <ng-container matColumnDef="couponType">
          <th mat-header-cell *matHeaderCellDef> Category </th>
          <td mat-cell *matCellDef="let element"> {{element.category}} </td>
        </ng-container>
        <!-- Description Column -->
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef> Description </th>
          <td mat-cell *matCellDef="let element"> {{element.description}} </td>
        </ng-container>
        <!-- Price Column -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef> Price </th>
          <td mat-cell *matCellDef="let element"> {{element.price}} </td>
        </ng-container>
        <!-- Company ID  Column -->
        <ng-container matColumnDef="companyId">
          <th mat-header-cell *matHeaderCellDef> Company ID </th>
          <td mat-cell *matCellDef="let element"> {{element.companyID}} </td>
        </ng-container>
        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">No data matching the filter "{{input3.value}}"</td>
        </tr>
      </table>
    </ng-container>
    <ng-template #elseTemplate>
      <div class="nothing">
        <img src="../../../assets/images/nothing.gif" alt="">
      </div>
      <p> No coupons to display ...</p>
    </ng-template>
  </mat-tab>

</mat-tab-group>

<div *ngIf="showSpinner" class="spinner">
  <app-spinner></app-spinner>
</div>
